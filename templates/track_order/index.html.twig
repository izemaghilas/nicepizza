{% extends 'base.html.twig' %}

{% block title %}Hello TrackerController!{% endblock %}

{% block body %}

{% endblock %}


{% block javascripts %}
    <script>
        const eventSource = new EventSource("{{ mercure('/order/'~id, {subscribe: '/order/'~id})|escape('js') }}", {
            withCredentials: true
        });
        eventSource.onmessage = event => {
            // Will be called every time an update is published by the server
            console.log(JSON.parse(event.data));
        }
        
    </script>
{% endblock javascripts %}